# AnaLeg - Интернет-магазин (основа для интернет магазина)

## Содержание
1. [Общее описание](#общее-описание)
2. [Структура проекта](#структура-проекта)
3. [База данных](#база-данных)
4. [Основные функции](#основные-функции)
5. [Административная панель](#административная-панель)
6. [Безопасность](#безопасность)
7. [SEO и оптимизация](#seo-и-оптимизация)
8. [Установка и настройка](#установка-и-настройка)

## Общее описание
AnaLeg - это современный интернет-магазин, разработанный на PHP с использованием MySQL. Проект включает в себя все необходимые функции для ведения онлайн-торговли, управления товарами и обработки заказов. Сайт оптимизирован для поисковых систем и обеспечивает высокий уровень безопасности.

## Структура проекта

### Основные директории и файлы
```
├── admin/                    # Административная панель
│   ├── index.php            # Главная страница админки
│   ├── products.php         # Управление товарами
│   ├── categories.php       # Управление категориями
│   ├── brands.php           # Управление брендами
│   ├── orders.php           # Управление заказами
│   ├── users.php            # Управление пользователями
│   ├── feedback.php         # Управление обратной связью
│   ├── edit_*.php           # Страницы редактирования
│   ├── view_*.php           # Страницы просмотра
│   └── delete_*.php         # Скрипты удаления
│
├── assets/                  # Статические файлы
│   ├── css/                # Стили
│   │   ├── style.css      # Основные стили
│   │   └── admin.css      # Стили админки
│   ├── js/                # JavaScript файлы
│   │   ├── main.js        # Основной скрипт
│   │   └── cart.js        # Функционал корзины
│   └── images/            # Изображения
│       ├── products/      # Фото товаров
│       ├── categories/    # Иконки категорий
│       └── brands/        # Логотипы брендов
│
├── auth/                   # Файлы аутентификации
│   ├── login.php          # Страница входа
│   ├── register.php       # Регистрация
│   ├── logout.php         # Выход из системы
│   └── reset.php          # Восстановление пароля
│
├── config/                 # Конфигурационные файлы
│   ├── database.php       # Настройки БД
│   ├── config.php         # Основные настройки
│   └── init.php           # Инициализация приложения
│
├── includes/              # Вспомогательные функции
│   ├── functions.php      # Общие функции
│   ├── db.php            # Работа с БД
│   └── validation.php    # Валидация данных
│
├── uploads/               # Загруженные файлы
│   ├── avatars/          # Аватары пользователей
│   ├── products/         # Изображения товаров
│   └── temp/             # Временные файлы
│
├── vendor/               # Зависимости
│   └── autoload.php      # Автозагрузка классов
│
├── index.php             # Главная страница
├── catalog.php           # Каталог товаров
├── product.php           # Страница товара
├── cart.php              # Корзина
├── checkout.php          # Оформление заказа
├── profile.php           # Личный кабинет
├── about.php             # О компании
├── contact.php           # Контакты
├── 404.php               # Страница ошибки
├── robots.txt            # Правила для роботов
├── sitemap.xml           # Карта сайта
└── .htaccess             # Конфигурация Apache
```

### Описание основных файлов

#### Административная панель (admin/)
- `index.php` - Главная страница админки с общей статистикой
- `products.php` - Управление товарами (добавление, редактирование, удаление)
- `categories.php` - Управление категориями товаров
- `brands.php` - Управление брендами
- `orders.php` - Просмотр и управление заказами
- `users.php` - Управление пользователями
- `feedback.php` - Обработка обратной связи

#### Статические файлы (assets/)
- `css/style.css` - Основные стили сайта
- `css/admin.css` - Стили административной панели
- `js/main.js` - Основной JavaScript файл
- `js/cart.js` - Функционал корзины (AJAX-запросы)

#### Аутентификация (auth/)
- `login.php` - Форма входа в систему
- `register.php` - Регистрация новых пользователей
- `logout.php` - Выход из системы
- `reset.php` - Восстановление пароля

#### Конфигурация (config/)
- `database.php` - Настройки подключения к БД
- `config.php` - Основные настройки сайта
- `init.php` - Инициализация приложения, подключение зависимостей

#### Вспомогательные функции (includes/)
- `functions.php` - Общие функции (форматирование, валидация)
- `db.php` - Функции для работы с базой данных
- `validation.php` - Функции валидации данных

#### Основные страницы
- `index.php` - Главная страница с популярными товарами
- `catalog.php` - Каталог товаров с фильтрацией
- `product.php` - Детальная страница товара
- `cart.php` - Корзина покупок
- `checkout.php` - Оформление заказа
- `profile.php` - Личный кабинет пользователя
- `about.php` - Информация о компании
- `contact.php` - Контактная информация
- `404.php` - Страница ошибки 404

#### Системные файлы
- `robots.txt` - Правила для поисковых роботов
- `sitemap.xml` - XML-карта сайта
- `.htaccess` - Конфигурация Apache (редиректы, безопасность)

## База данных

### Основные таблицы
1. **users** - Пользователи
   - id (INT, PRIMARY KEY)
   - username (VARCHAR)
   - phone (VARCHAR)
   - password (VARCHAR)
   - avatar (VARCHAR)
   - is_admin (BOOLEAN)
   - created_at (TIMESTAMP)

2. **products** - Товары
   - id (INT, PRIMARY KEY)
   - name (VARCHAR)
   - slug (VARCHAR)
   - description (TEXT)
   - price (DECIMAL)
   - stock (INT)
   - category_id (INT, FOREIGN KEY)
   - brand_id (INT, FOREIGN KEY)
   - is_active (BOOLEAN)
   - created_at (TIMESTAMP)

3. **categories** - Категории
   - id (INT, PRIMARY KEY)
   - name (VARCHAR)
   - slug (VARCHAR)
   - description (TEXT)
   - parent_id (INT, FOREIGN KEY)
   - created_at (TIMESTAMP)

4. **orders** - Заказы
   - id (INT, PRIMARY KEY)
   - user_id (INT, FOREIGN KEY)
   - status (VARCHAR)
   - total_amount (DECIMAL)
   - shipping_address (TEXT)
   - payment_method (VARCHAR)
   - created_at (TIMESTAMP)

5. **order_items** - Элементы заказа
   - id (INT, PRIMARY KEY)
   - order_id (INT, FOREIGN KEY)
   - product_id (INT, FOREIGN KEY)
   - quantity (INT)
   - price (DECIMAL)

6. **cart** - Корзина
   - id (INT, PRIMARY KEY)
   - user_id (INT, FOREIGN KEY)
   - product_id (INT, FOREIGN KEY)
   - quantity (INT)
   - created_at (TIMESTAMP)

7. **feedback_messages** - Обратная связь
   - id (INT, PRIMARY KEY)
   - user_id (INT, FOREIGN KEY)
   - message (TEXT)
   - admin_response (TEXT)
   - created_at (TIMESTAMP)
   - responded_at (TIMESTAMP)

## Основные функции

### Пользовательская часть
1. **Регистрация и авторизация**
   - Регистрация с подтверждением телефона
   - Вход через телефон
   - Восстановление пароля
   - Управление профилем
   - Загрузка аватара

2. **Каталог товаров**
   - Просмотр категорий и подкатегорий
   - Фильтрация по цене, бренду, категории
   - Поиск по названию и описанию
   - Сортировка по цене и популярности
   - Пагинация результатов

3. **Корзина и оформление заказа**
   - Добавление товаров в корзину
   - Изменение количества
   - Удаление товаров
   - Оформление заказа
   - Выбор способа оплаты
   - Указание адреса доставки
   - Подтверждение заказа

4. **Личный кабинет**
   - Просмотр истории заказов
   - Детали заказов
   - Управление адресами доставки
   - Изменение данных профиля
   - Загрузка аватара
   - Обратная связь

### Административная панель
1. **Управление товарами**
   - Добавление/редактирование товаров
   - Загрузка изображений
   - Управление остатками
   - Установка цен
   - Назначение категорий и брендов

2. **Управление заказами**
   - Просмотр списка заказов
   - Изменение статуса заказа
   - Просмотр деталей заказа
   - История изменений
   - Комментарии к заказам

3. **Управление пользователями**
   - Просмотр пользователей
   - Блокировка/разблокировка
   - Назначение прав администратора
   - Просмотр истории заказов

4. **Управление обратной связью**
   - Просмотр сообщений
   - Ответы на сообщения
   - Фильтрация по статусу

## Безопасность

### Основные меры безопасности
1. **Защита от SQL-инъекций**
   - Использование подготовленных запросов
   - Валидация входных данных
   - Экранирование специальных символов

2. **Защита сессий**
   - Безопасное хранение сессий
   - Проверка прав доступа
   - Защита от CSRF-атак

3. **Защита паролей**
   - Хеширование паролей (bcrypt)
   - Соль для хеширования
   - Ограничение попыток входа

4. **Защита от XSS**
   - Экранирование вывода
   - Валидация загружаемых файлов
   - Content Security Policy

5. **Защита файлов**
   - Ограничение доступа к системным файлам
   - Валидация загружаемых файлов
   - Безопасные имена файлов

## SEO и оптимизация

### Основные меры
1. **Мета-теги**
   - Уникальные title и description
   - Ключевые слова
   - Open Graph теги

2. **Структура URL**
   - ЧПУ (человекопонятные URL)
   - Редирект с WWW
   - Принудительный HTTPS

3. **Файлы для поисковых систем**
   - robots.txt
   - sitemap.xml
   - Оптимизированные изображения

4. **Производительность**
   - Сжатие файлов
   - Кеширование
   - Оптимизация изображений

## Установка и настройка

### Требования
- PHP 7.4 или выше
- MySQL 5.7 или выше
- Apache/Nginx
- mod_rewrite (для Apache)
- GD Library
- PDO PHP Extension

### Шаги установки
1. Клонировать репозиторий
2. Создать базу данных
3. Импортировать структуру БД из `database.sql`
4. Настроить подключение к БД в `config/database.php`
5. Настроить права доступа к директориям
6. Настроить веб-сервер
7. Создать администратора

### Конфигурация
1. **Настройка базы данных**
   ```php
   // config/database.php
   define('DB_HOST', 'localhost');
   define('DB_NAME', 'your_database');
   define('DB_USER', 'your_username');
   define('DB_PASS', 'your_password');
   ```

2. **Настройка путей**
   ```php
   // config/config.php
   define('SITE_URL', 'https://your-domain.com');
   define('UPLOAD_PATH', __DIR__ . '/../uploads');
   define('ADMIN_EMAIL', 'admin@your-domain.com');
   ```

## Дополнительные возможности

### Интеграции
1. **Платежные системы**
   - Наличные при получении
   - Банковские карты
   - Электронные кошельки

2. **Социальные сети**
   - Avito
   - Telegram
   - WhatsApp

### Расширения
1. **Система уведомлений**
   - Email-уведомления
   - SMS-уведомления
   - Push-уведомления

2. **Система скидок**
   - Промокоды
   - Накопительные скидки
   - Сезонные акции

## Поддержка и обновления
- Регулярные обновления безопасности
- Техническая поддержка
- Документация по API
- Руководство пользователя
- Обновление базы данных
- Резервное копирование 
